<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GT7 Telemetry Dashboard</title>
    <link rel="stylesheet" href="/styles.css">
    <link rel="stylesheet" href="/uplot.min.css">
</head>
<body>
    <div class="dashboard">
        <div class="header">
            <span class="header-title">GT7 TELEMETRY DASHBOARD</span>
            <div id="connection-status" class="disconnected">Disconnected</div>
        </div>

        <!-- Left Panel -->
        <div class="left-panel">
            <div class="card speed-card">
                <div class="speed-value" id="speed">0</div>
                <div class="speed-unit">km/h</div>
            </div>

            <div class="card gear-rpm-card">
                <div class="gear-display">
                    <div class="gear-value" id="gear">N</div>
                    <div class="gear-label">GEAR</div>
                </div>
                <div class="rpm-display">
                    <div class="rpm-bar-bg">
                        <div class="rpm-bar" id="rpm-bar"></div>
                    </div>
                    <div class="rpm-text" id="rpm-text">0 RPM</div>
                </div>
            </div>

            <div class="card pedals-card">
                <div class="pedal-row">
                    <span class="pedal-label">THROTTLE</span>
                    <div class="pedal-bar-bg">
                        <div class="throttle-bar" id="throttle-bar"></div>
                    </div>
                    <span class="pedal-value" id="throttle-value">0%</span>
                </div>
                <div class="pedal-row">
                    <span class="pedal-label">BRAKE</span>
                    <div class="pedal-bar-bg">
                        <div class="brake-bar" id="brake-bar"></div>
                    </div>
                    <span class="pedal-value" id="brake-value">0%</span>
                </div>
            </div>

            <div class="card fuel-boost-grid">
                <div class="fuel-boost-item">
                    <div class="fuel-boost-value" id="fuel">--</div>
                    <div class="fuel-boost-label">FUEL (L)</div>
                </div>
                <div class="fuel-boost-item">
                    <div class="fuel-boost-value boost" id="boost">--</div>
                    <div class="fuel-boost-label">BOOST (%)</div>
                </div>
            </div>

            <div class="card stat-card">
                <div class="stat-value" id="max-speed">--</div>
                <div class="stat-label">MAX SPEED (km/h)</div>
            </div>
        </div>

        <!-- Center Panel -->
        <div class="center-panel">
            <div class="charts-container">
                <div class="chart-wrapper">
                    <div class="chart-title">SPEED</div>
                    <div id="speed-chart" class="chart"></div>
                </div>
                <div class="chart-wrapper">
                    <div class="chart-title">RPM</div>
                    <div id="rpm-chart" class="chart"></div>
                </div>
                <div class="chart-wrapper">
                    <div class="chart-title">THROTTLE</div>
                    <div id="throttle-chart" class="chart"></div>
                </div>
                <div class="chart-wrapper">
                    <div class="chart-title">BRAKE</div>
                    <div id="brake-chart" class="chart"></div>
                </div>
            </div>

            <div class="card course-map-card">
                <div class="course-map-header">
                    <div class="card-title">COURSE MAP</div>
                    <button id="test-mode-btn" class="test-mode-btn">TEST MODE</button>
                </div>
                <div class="course-map-container">
                    <canvas id="course-map"></canvas>
                    <div class="course-map-info" id="course-map-info">Waiting for data...</div>
                </div>
            </div>

            <div class="card tyres-card">
                <div class="card-title">TYRES</div>
                <div class="tyres-grid">
                    <div class="tyre-item">
                        <div class="tyre-pos">FL</div>
                        <div class="tyre-data-row">
                            <div class="tyre-temp-row">
                                <span class="tyre-temp" id="fl-temp">--</span>
                                <span class="tyre-temp-unit">&deg;C</span>
                            </div>
                            <div class="tyre-pressure-row">
                                <span class="tyre-pressure" id="fl-pressure">--</span>
                                <span class="tyre-pressure-unit">bar</span>
                            </div>
                            <div class="tyre-rps-row">
                                <span class="tyre-rps" id="fl-rps">--</span>
                                <span class="tyre-rps-unit">rps</span>
                            </div>
                        </div>
                    </div>
                    <div class="tyre-item">
                        <div class="tyre-pos">FR</div>
                        <div class="tyre-data-row">
                            <div class="tyre-temp-row">
                                <span class="tyre-temp" id="fr-temp">--</span>
                                <span class="tyre-temp-unit">&deg;C</span>
                            </div>
                            <div class="tyre-pressure-row">
                                <span class="tyre-pressure" id="fr-pressure">--</span>
                                <span class="tyre-pressure-unit">bar</span>
                            </div>
                            <div class="tyre-rps-row">
                                <span class="tyre-rps" id="fr-rps">--</span>
                                <span class="tyre-rps-unit">rps</span>
                            </div>
                        </div>
                    </div>
                    <div class="tyre-item">
                        <div class="tyre-pos">RL</div>
                        <div class="tyre-data-row">
                            <div class="tyre-temp-row">
                                <span class="tyre-temp" id="rl-temp">--</span>
                                <span class="tyre-temp-unit">&deg;C</span>
                            </div>
                            <div class="tyre-pressure-row">
                                <span class="tyre-pressure" id="rl-pressure">--</span>
                                <span class="tyre-pressure-unit">bar</span>
                            </div>
                            <div class="tyre-rps-row">
                                <span class="tyre-rps" id="rl-rps">--</span>
                                <span class="tyre-rps-unit">rps</span>
                            </div>
                        </div>
                    </div>
                    <div class="tyre-item">
                        <div class="tyre-pos">RR</div>
                        <div class="tyre-data-row">
                            <div class="tyre-temp-row">
                                <span class="tyre-temp" id="rr-temp">--</span>
                                <span class="tyre-temp-unit">&deg;C</span>
                            </div>
                            <div class="tyre-pressure-row">
                                <span class="tyre-pressure" id="rr-pressure">--</span>
                                <span class="tyre-pressure-unit">bar</span>
                            </div>
                            <div class="tyre-rps-row">
                                <span class="tyre-rps" id="rr-rps">--</span>
                                <span class="tyre-rps-unit">rps</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-title" style="margin-top: 4px;">SUSPENSION</div>
                <div class="suspension-grid">
                    <div class="susp-item">
                        <div class="susp-pos">FL</div>
                        <div class="susp-value" id="fl-susp">--</div>
                        <div class="susp-unit">mm</div>
                    </div>
                    <div class="susp-item">
                        <div class="susp-pos">FR</div>
                        <div class="susp-value" id="fr-susp">--</div>
                        <div class="susp-unit">mm</div>
                    </div>
                    <div class="susp-item">
                        <div class="susp-pos">RL</div>
                        <div class="susp-value" id="rl-susp">--</div>
                        <div class="susp-unit">mm</div>
                    </div>
                    <div class="susp-item">
                        <div class="susp-pos">RR</div>
                        <div class="susp-value" id="rr-susp">--</div>
                        <div class="susp-unit">mm</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Panel -->
        <div class="right-panel">
            <div class="card lap-times-card">
                <div class="lap-row">
                    <span class="lap-label">LAP</span>
                    <span class="lap-value" id="current-lap">--</span>
                </div>
                <div class="lap-row">
                    <span class="lap-label">CURRENT</span>
                    <span class="lap-value" id="current-lap-time">--:--.---</span>
                </div>
                <div class="lap-row">
                    <span class="lap-label">BEST</span>
                    <span class="lap-value" id="best-lap-time">--:--.---</span>
                </div>
            </div>

            <div class="card delta-card">
                <div class="delta-value" id="lap-delta">--</div>
                <div class="delta-label">DELTA VS BEST</div>
            </div>

            <div class="card lap-history-card">
                <div class="card-title">LAP HISTORY</div>
                <div id="lap-list" class="lap-history-list"></div>
            </div>

            <div class="card position-card">
                <div class="card-title">POSITION</div>
                <div class="position-row">
                    <span class="position-label">X</span>
                    <span class="position-value" id="pos-x">--</span>
                </div>
                <div class="position-row">
                    <span class="position-label">Y</span>
                    <span class="position-value" id="pos-y">--</span>
                </div>
                <div class="position-row">
                    <span class="position-label">Z</span>
                    <span class="position-value" id="pos-z">--</span>
                </div>
            </div>

            <div class="stats-grid">
                <div class="card stat-card">
                    <div class="stat-value" id="car-id">--</div>
                    <div class="stat-label">CAR ID</div>
                </div>
                <div class="card stat-card">
                    <div class="stat-value" id="packets">0</div>
                    <div class="stat-label">PACKETS</div>
                </div>
            </div>

            <div class="stats-grid">
                <div class="card stat-card">
                    <div class="stat-value" id="accel-g">--</div>
                    <div class="stat-label">ACCEL G</div>
                </div>
                <div class="card stat-card">
                    <div class="stat-value" id="accel-decel">--</div>
                    <div class="stat-label">DECEL G</div>
                </div>
            </div>

            <div class="card accel-chart-card">
                <div class="chart-title">ACCELERATION (G)</div>
                <div class="accel-chart-container">
                    <canvas id="accel-chart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <script src="/uplot.min.js"></script>
    <script src="/ui_components.js"></script>
    <script src="/charts.js"></script>
    <script src="/course-map.js"></script>
    <script src="/websocket.js"></script>
    <script src="/test-mode.js"></script>
    <script src="/app.js"></script>
</body>
</html>
