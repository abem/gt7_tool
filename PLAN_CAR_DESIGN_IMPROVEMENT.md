# 3D車両モデル デザイン改善計画書

---

## 1. 現状の問題点

### 1.1 ボディ
- **単一のExtrudeGeometry**で作成されており、立体感に欠ける
- サイドプロファイルをそのまま押し出しただけの「角張った」形状
- ボンネット・ルーフ・フェンダーの段差が表現されていない
- 前後のオーバーハングが平坦で特徴がない

### 1.2 ウインドウ
- 薄いクワッド（板）であり、厚みがない
- フレーム（黒い縁）が表現されていない
- Aピラー/Bピラー/Cピラーが明確でない

### 1.3 ライト類
- **ヘッドライト**: 単純な円形（CircleGeometry）で安っぽい
- **テールライト**: 4つの小さな円だけで、リアルなLEDリフレクター感がない
- 発光表現が弱い（emissiveのみ）

### 1.4 ホイール
- **リム**: 5角形のCircleGeometryで、スポークデザインがない
- **タイヤ**: 単純なシリンダーで、トレッドパターンがない
- ブレーキキャリパーがない
- ホイールナットがない

### 1.5 エアロパーツ
- インテークが単純なBoxGeometry
- フロントスプリッター・リアディフューザーが薄い板
- カナード・サイドミラーがない

### 1.6 マテリアル・シェーディング
- MeshPhongMaterialのみで、反射表現が古い
- カーボン/メッキ/ゴムなどの質感差がない
- 環境マッピングがない

---

## 2. 改善方針

### 2.1 全体コンセプト
**「GT7級のクオリティを目指す」** とは言わないが、**「一目でスポーツカーと分かるデザイン」** にする

### 2.2 アプローチ
1. **複数パーツの組み合わせ** - 1つのボディではなく、複数のメッシュを組み合わせて立体感を出す
2. **ディテール追加** - ミラー、カナード、カナード、ダクト類
3. **マテリアル改善** - MeshStandardMaterial使用、メタリック表現
4. **ホイール刷新** - スポークモデル、キャリパー追加

---

## 3. 詳細設計

### 3.1 ボディ再設計

#### 3.1.1 マルチレイヤー構造
```
┌─────────────────────────────────────┐
│  ルーフ（別パーツ）                    │
├─────────────────────────────────────┤
│  キャビン（ウインドウ枠）               │
├─────────────────────────────────────┤
│  アッパーボディ（フェンダー上部）        │
├─────────────────────────────────────┤
│  ロワーボディ（サイドスカート領域）      │
└─────────────────────────────────────┘
```

#### 3.1.2 フェンダー表現
- 前後フェンダーを別メッシュで作成し、オーバーフェンダー感を出す
- ホイールアーチを掘り下げる

#### 3.1.3 ボンネット・トランク
- ボンネットにNACAダクト追加
- トランク（エンジンカバー）にエアアウトレット追加

### 3.2 ウインドウ改善

#### 3.2.1 ピラー表現
```javascript
// Aピラー: フロントガラスの黒い枠
// Bピラー: サイドウインドウ間の柱
// Cピラー: リアウインドウ周りの黒い枠
```

#### 3.2.2 フレーム追加
- ウインドウ周りに細い黒いフレーム（0.02m幅）
- フロントガラス上部に黒帯（サンバイザー風）

### 3.3 ライト類刷新

#### 3.3.1 ヘッドライト
```
┌────────────────────────┐
│  ┌──────┐  ┌──────┐   │  // デイライト
│  │ ●●●● │  │ ●●●● │   │  // LEDプロジェクター
│  └──────┘  └──────┘   │
│  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓   │  // ターンシグナル
└────────────────────────┘
```
- 複数の小さなシリンダーでLED表現
- レンズカバー（半透明）
- 発光強度を強化（PointLight追加も検討）

#### 3.3.2 テールライト
- 横長のLEDストリップ風
- リフレクター（反射板）テクスチャ風表現
- バックランプ（白）追加

### 3.4 ホイール刷新

#### 3.4.1 リムデザイン（5スポーク→Y字5スポーク）
```
        ╲  ╱
         ╲╱
     ────●────  // ハブ
         ╱╲
        ╱  ╲
```
- スポークを細長いBoxGeometryで作成
- リムの深さ（インセット）表現

#### 3.4.2 追加パーツ
| パーツ | 形状 | 色 |
|--------|------|-----|
| ブレーキキャリパー | BoxGeometry | イエロー/レッド |
| ブレーキローター | TorusGeometry | シルバー（ドリルド） |
| ホイールナット | CylinderGeometry | ブラック/シルバー |
| タイヤレター | TextGeometry | ホワイト（オプション） |

### 3.5 追加ディテール

#### 3.5.1 サイドミラー
```
     ┌───┐
     │ □ │  // ミラー面
   ──┴─┬─┴──
       │     // ステム
```

#### 3.5.2 カナード（フロント）
- フロントバンパー両端に小さな翼型パーツ

#### 3.5.3 フロントグリル
- メッシュパターン（複数の細いBox）

#### 3.5.4 エキゾースト
- オーバル型または円形4連
- 内側に黒い筒

### 3.6 マテリアル改善

#### 3.6.1 MeshStandardMaterial使用
```javascript
// ボディ（メタリック塗装）
bodyMat = new THREE.MeshStandardMaterial({
    color: 0xcc0000,
    metalness: 0.8,
    roughness: 0.2,
    envMapIntensity: 1.0
});

// カーボン部
carbonMat = new THREE.MeshStandardMaterial({
    color: 0x1a1a1a,
    metalness: 0.0,
    roughness: 0.4
});

// クロームメッキ
chromeMat = new THREE.MeshStandardMaterial({
    color: 0xffffff,
    metalness: 1.0,
    roughness: 0.0
});
```

#### 3.6.2 環境マップ追加
```javascript
// PMREMGeneratorで環境マップ生成
// またはCubeTextureLoaderでHDR読み込み
```

---

## 4. 実装優先順位

### Phase 1: 基本形状改善（効果大）
1. ボディを複数パーツに分割（ルーフ/ボンネット/フェンダー）
2. サイドミラー追加
3. ホイールのスポーク化

### Phase 2: ライト類刷新
1. ヘッドライトのLED化
2. テールライトのストリップ化
3. 発光強化（emissive強化）

### Phase 3: ディテール追加
1. カナード追加
2. フロントグリルのメッシュ化
3. ブレーキキャリパー追加

### Phase 4: マテリアル改善
1. MeshStandardMaterial移行
2. 環境マップ追加
3. カーボン/メッキ質感

---

## 5. 設定可能パラメータ案

```javascript
var CAR_DESIGN_CONFIG = {
    // ボディスタイル
    bodyStyle: 'midship',  // 'midship' | 'front' | 'suv'

    // カラー
    bodyColor: 0xcc0000,
    accentColor: 0x111111,  // カーボン部
    caliperColor: 0xffcc00, // キャリパー

    // ホイール
    wheelDesign: 'y-spoke', // 'y-spoke' | 'mesh' | 'solid'
    wheelColor: 0xcccccc,
    caliperType: 'yellow',  // 'yellow' | 'red' | 'black'

    // エアロ
    hasCanards: true,
    hasSplitter: true,
    hasDiffuser: true,
    hasWing: true
};
```

---

## 6. 注意事項

- **ポリゴン数**: ディテールを増やしすぎるとパフォーマンスに影響。目標は10,000ポリゴン以下
- **テクスチャ**: 基本的にジオメトリで表現（テクスチャなし）
- **既存機能**: 演出効果・ステアリング回転との互換性を維持

---

## 7. 参考イメージ

### 現在
```
   _______
  /       \
 |  ●   ●  |   ← 単純な箱型
  \_______/
```

### 改善後
```
    ___
   /   \___      ← ルーフ別パーツ
  |  □ □  |__    ← LEDライト
 / ●      ●  \   ← オーバーフェンダー
 ══════════════  ← スプリッター
```

---

**作成日:** 2024-XX-XX
**ステータス:** 計画段階
**推定工数:** Phase 1: 2-3時間 / Phase 2-4: 各1-2時間
